{"ast":null,"code":"import _toConsumableArray from \"/Users/gabrielwolf/Desktop/pro-shop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/gabrielwolf/Desktop/pro-shop/frontend/src/screens/CartScreen.jsx\";\n\nimport React, { useEffect } from 'react';\nimport { Link, useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport { Row, Col, ListGroup, Image, Form, Button, Card } from \"react-bootstrap\";\nimport { addToCart, removeFromCart } from '../actions/cartActions';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Message from \"../components/Message\";\n\nvar CartScreen = function CartScreen() {\n  var _useParams = useParams(),\n      id = _useParams.id;\n\n  var _useLocation = useLocation(),\n      search = _useLocation.search;\n\n  var qty = search ? Number(search.split(\"=\")[1]) : 1;\n  var navigate = useNavigate();\n  var dispatch = useDispatch();\n  var cart = useSelector(function (state) {\n    return state.cart;\n  });\n  var cartItems = cart.cartItems;\n  useEffect(function () {\n    if (id) {\n      dispatch(addToCart(id, qty));\n    }\n  }, [dispatch, id, qty]);\n\n  var removeFromCartHandler = function removeFromCartHandler(id) {\n    dispatch(removeFromCart(id));\n  };\n\n  var checkoutHandler = function checkoutHandler() {\n    navigate(\"/login?redirect=shipping\");\n  };\n\n  return /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }\n  }, \"Shopping Cart\"), cartItems.length === 0 ? /*#__PURE__*/React.createElement(Message, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 39\n    }\n  }, \"Your cart is empty \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 67\n    }\n  }, \"Go Back\")) : /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 17\n    }\n  }, cartItems.map(function (item) {\n    return /*#__PURE__*/React.createElement(ListGroup.Item, {\n      key: item.product,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: item.image,\n      alt: item.name,\n      fluid: true,\n      rounded: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      md: 3,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/product/\".concat(item.product),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 37\n      }\n    }, item.name)), /*#__PURE__*/React.createElement(Col, {\n      md: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 33\n      }\n    }, \"$\", item.price), /*#__PURE__*/React.createElement(Col, {\n      md: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"select\",\n      value: item.qty,\n      onChange: function onChange(e) {\n        return dispatch(addToCart(item.product, Number(e.target.value)));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 33\n      }\n    }, _toConsumableArray(Array(item.countInStock).keys()).map(function (x) {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: x + 1,\n        value: x + 1,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 45\n        }\n      }, x + 1);\n    }))), /*#__PURE__*/React.createElement(Col, {\n      md: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      variant: \"light\",\n      onClick: function onClick() {\n        return removeFromCartHandler(id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-trash\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 41\n      }\n    })))));\n  }))), /*#__PURE__*/React.createElement(Col, {\n    md: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 25\n    }\n  }, \"Subtotal (\", cartItems.reduce(function (acc, item) {\n    return acc + item.qty;\n  }, 0), \") items\"), \"$\", cartItems.reduce(function (acc, item) {\n    return acc + item.qty * item.price;\n  }, 0).toFixed(2)), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    className: \"btn-block\",\n    disabled: cartItems.length === 0,\n    onClick: checkoutHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }\n  }, \"Proceed to checkout\"))))));\n};\n\nexport default CartScreen;","map":{"version":3,"names":["React","useEffect","Link","useLocation","useNavigate","useParams","Row","Col","ListGroup","Image","Form","Button","Card","addToCart","removeFromCart","useDispatch","useSelector","Message","CartScreen","id","search","qty","Number","split","navigate","dispatch","cart","state","cartItems","removeFromCartHandler","checkoutHandler","length","map","item","product","image","name","price","e","target","value","Array","countInStock","keys","x","reduce","acc","toFixed"],"sources":["/Users/gabrielwolf/Desktop/pro-shop/frontend/src/screens/CartScreen.jsx"],"sourcesContent":["import React, { useEffect } from 'react'\nimport {Link, useLocation, useNavigate, useParams } from \"react-router-dom\"\nimport {Row, Col, ListGroup, Image, Form, Button, Card} from \"react-bootstrap\"\nimport { addToCart, removeFromCart } from '../actions/cartActions'\nimport { useDispatch, useSelector } from 'react-redux'\nimport Message from \"../components/Message\"\n\nconst CartScreen = () => {\n    const {id} = useParams()\n    const {search} = useLocation()\n    const qty = search ? Number(search.split(\"=\")[1]) : 1\n    const navigate = useNavigate()\n\n    const dispatch = useDispatch()\n\n    const cart = useSelector(state => state.cart)\n    const {cartItems} = cart\n\n    useEffect(()=>{\n        if(id){\n            dispatch(addToCart(id, qty))\n        }\n    },[dispatch, id, qty])\n\n    const removeFromCartHandler = (id) =>{\n        dispatch(removeFromCart(id))\n    }\n\n    const checkoutHandler = () => {\n        navigate(\"/login?redirect=shipping\")\n    } \n\n  return (\n    <Row>\n        <Col md={8}>\n            <h1>Shopping Cart</h1>\n            {cartItems.length === 0 ? <Message>Your cart is empty <Link to=\"/\">Go Back</Link></Message> : (\n                <ListGroup variant=\"flush\">\n                    {cartItems.map(item => (\n                        <ListGroup.Item key={item.product}>\n                            <Row>\n                                <Col md={2}>\n                                    <Image src={item.image} alt={item.name} fluid rounded/>\n                                </Col>\n                                <Col md={3}>\n                                    <Link to={`/product/${item.product}`}>{item.name}</Link>\n                                </Col>\n                                <Col md={2}>${item.price}</Col>\n                                <Col md={2}>\n                                <Form.Control as=\"select\" value={item.qty} onChange={(e) => dispatch(addToCart(item.product, Number(e.target.value)))}>\n                                        {[...Array(item.countInStock).keys()].map((x) => (\n                                            <option key={x+1} value ={x + 1}>\n                                                {x + 1}\n                                            </option>\n                                        ))}\n                                    </Form.Control>\n                                </Col>\n                                <Col md={2}>\n                                    <Button type=\"button\" variant=\"light\" onClick={() => removeFromCartHandler(id)}>\n                                        <i className='fas fa-trash'></i>\n                                    </Button>\n                                </Col>\n                            </Row>\n                        </ListGroup.Item>\n                    ))}\n                </ListGroup>\n            )}\n\n        </Col>\n        <Col md={4}>\n            <Card>\n                <ListGroup variant=\"flush\">\n                    <ListGroup.Item>\n                        <h2>Subtotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)}) items</h2>\n                        ${cartItems.reduce((acc, item) => acc + item.qty * item.price, 0).toFixed(2)}\n                    </ListGroup.Item>\n                    <ListGroup.Item>\n                        <Button type=\"button\" className=\"btn-block\" disabled={cartItems.length === 0} onClick={checkoutHandler}>Proceed to checkout</Button>\n                    </ListGroup.Item>\n                </ListGroup>\n                \n            </Card>\n        </Col>\n    </Row>\n  )\n}\n\nexport default CartScreen"],"mappings":"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"},"metadata":{},"sourceType":"module"}